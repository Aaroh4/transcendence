FROM node:23-slim

ARG STUN_URL
ARG TURN_URL
ARG TURN_USER
ARG TURN_PASS
ARG EXT_IP

ENV VITE_STUN_URL=$STUN_URL
ENV VITE_TURN_URL=$TURN_URL
ENV VITE_TURN_USER=$TURN_USER
ENV VITE_TURN_PASS=$TURN_PASS
ENV VITE_EXT_IP=$EXT_IP

WORKDIR /app

ENV NODE_ENV=development

COPY package*.json ./
RUN npm install

RUN npm install -g nodemon

COPY . .

EXPOSE 4000

CMD ["npx", "nodemon", "authServer.js"]
